{% extends 'main/index.html' %}
{% comment %} {% load dict_extras %} {% endcomment %}

{% block title %}<title>Batch</title>{% endblock title %}

{% block main %}
<div class="p-6">

    <!-- Page Header -->
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold text-gray-800">Class Timetable Scheduler</h1>
    </div>


    <!-- Timetable Form -->
    <form method="POST" class="space-y-6 bg-white p-6 rounded-xl shadow-lg">
        {% csrf_token %}

          {% if messages %}
  <div class="mb-4 space-y-2">
    {% for message in messages %}
      <div 
        class="p-3 rounded-lg text-white
        {% if message.tags == 'success' %} bg-green-600 {% elif message.tags == 'error' %} bg-red-600 {% else %} bg-gray-600 {% endif %}"
      >
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}

        <!-- Batch Name -->
        <div>
            <label class="block text-gray-700 font-semibold mb-2">
                Batch Name <span class="text-red-500">*</span>
            </label>
            <input type="text" id="batch_name" name="batch_name" placeholder="Enter batch name" required
                class="w-full rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
                aria-describedby="batch_name_help" />
            <p id="batch_name_help" class="mt-1 text-xs text-gray-500">Unique name for the batch.</p>
        </div>

        <!-- Course -->
        <div>
            <label class="block text-gray-700 font-semibold mb-2">
                Course <span class="text-red-500">*</span>
            </label>
            <input type="text" id="course" name="course" placeholder="Enter course name" required
                class="w-full rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
                aria-describedby="course_help" />
            <p id="course_help" class="mt-1 text-xs text-gray-500">Name of the course for this batch.</p>
        </div>

        <!-- Year -->
        <div>
            <label class="block text-gray-700 font-semibold mb-2">
                Year <span class="text-red-500">*</span>
            </label>
            <input type="number" id="year" name="year" placeholder="e.g., 2024" min="2000" max="2100" required
                class="w-full rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
                aria-describedby="year_help" />
            <p id="year_help" class="mt-1 text-xs text-gray-500">Year the batch is enrolled.</p>
        </div>

        <!-- Student Count -->
        <div>
            <label class="block text-gray-700 font-semibold mb-2">
                Student Count <span class="text-red-500">*</span>
            </label>
            <input type="number" id="student_count" name="student_count" placeholder="Number of students" min="1"
                max="1000" required
                class="w-full rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
                aria-describedby="student_count_help" />
            <p id="student_count_help" class="mt-1 text-xs text-gray-500">Total students in the batch.</p>
        </div>

        <!-- Classroom -->
        <div>
    <label class="block text-gray-700 font-semibold mb-2">
        Classroom <span class="text-red-500">*</span>
    </label>
    <select 
        id="classroom" 
        name="classroom" 
        required
        class="w-full rounded-md border border-gray-300 px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
        aria-describedby="classroom_help"
    >
        <option value="" disabled selected>Select a classroom</option>
        {% for room in classrooms %}
            <option value="{{ room.id }}">{{ room.class_name }} ({{ room.room_type }})</option>
        {% endfor %}
    </select>
    <p id="classroom_help" class="mt-1 text-xs text-gray-500">Select a classroom from the list.</p>
</div>


        <!-- Submit Button -->
        <div>
            <button type="submit"
                class="w-full bg-indigo-600 text-white font-semibold py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition">
                Add Batch
            </button>
        </div>
</div>
{% endblock main %}